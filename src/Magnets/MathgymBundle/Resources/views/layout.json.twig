{#
 #  This file is part of Mathstreams.
 #
 #  Copyright (c) 2015  Sohani Academy <developer@sohaniacademy.com>
 #
 #  Mathstreams is free software: you can redistribute it and/or modify
 #  it under the terms of the GNU Affero General Public License as
 #  published by the Free Software Foundation, either version 3 of the
 #  License, or (at your option) any later version.
 #
 #  This program is distributed in the hope that it will be useful,
 #  but WITHOUT ANY WARRANTY; without even the implied warranty of
 #  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 #  GNU Affero General Public License for more details.
 #
 #  You should have received a copy of the GNU Affero General Public License
 #  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #}

{% import "MagnetsMathgymBundle:UI:macros.html.twig" as MX %}
{% if body is not defined %}
    {% set body = block('body')|raw|default('')%}
{% endif %}
{% set json_response = { 'status':'OK', 'body':body, 'flash':app.session.flashbag.all() } %}
{{ json_response|json_encode()|raw }}

{# {% set json_response = json_response|merge({ 'body':block('body')|default('') }) %} #}
{#{% if app.session.flashbag.peekall()|length > 0 %}#}
{#{% set flashOb = app.session.flashbag.all() %}#}
{#{% set json_response = json_response|merge({'flash':flashOb}) %}#}
{#{% endif %}#}
{#{{ json_response|json_encode()|raw }}#}