{#
 #  This file is part of Mathstreams.
 #
 #  Copyright (c) 2015  Sohani Academy <developer@sohaniacademy.com>
 #
 #  Mathstreams is free software: you can redistribute it and/or modify
 #  it under the terms of the GNU Affero General Public License as
 #  published by the Free Software Foundation, either version 3 of the
 #  License, or (at your option) any later version.
 #
 #  This program is distributed in the hope that it will be useful,
 #  but WITHOUT ANY WARRANTY; without even the implied warranty of
 #  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 #  GNU Affero General Public License for more details.
 #
 #  You should have received a copy of the GNU Affero General Public License
 #  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #}

{#
    If it is a nonXHR, just render the contents..
    If it is an XHR, but is a master request, then render into JSON wrapper
    If it is an XHR, but not  master request, then render the contents..
    We use a twig extension to get the master request status..
    Only problem is, that extension is not lazy loaded!

    {% extends (app.request.isXmlHttpRequest() and isMasterRequest()) ? 'MagnetsMathgymBundle::layout.json.twig' : 'MagnetsMathgymBundle::blank.html.twig' %}
#}
{#{% if isGlobal is defined and isGlobal == true %}#}
    {#{% extends (app.request.isXmlHttpRequest() and isMasterRequest())? 'MagnetsMathgymBundle::layout.json.twig' : 'MagnetsMathgymBundle::blank.html.twig' %}#}
    {#{% set isGlobal = false %}#}
    {#{% block body %}#}
        {#IsGlobal:{{ isGlobal?'Gg':'lL' }}#}
        {#{{ block('frag_body') }}#}
    {#{% endblock %}#}
{#{% else %}#}
    {#{% block frag_body %}#}
    {#{% endblock %}#}
{#{% endif %}#}
{# Simplest way out.. always encapsulate fragments, and be done with it, already #}
{# But dil maange a better solution #}
{% extends 'MagnetsMathgymBundle::blank.html.twig' %}
{% block body %}
    {% block frag_body %}
    {% endblock %}
{% endblock %}